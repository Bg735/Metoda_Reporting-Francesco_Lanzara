{
    "AllowedHosts": "*",
    "Logging": {
        "LogLevel": {
            "Default": "Debug",
            "Microsoft.AspNetCore": "Debug",
            "Microsoft.AspNetCore.Server.Kestrel": "Debug",
            "Yarp.ReverseProxy": "Debug"
        }
    },
    "Kestrel": {
        "EndpointDefaults": {
            "ForwardedHeaders": "All"
        }
    },
    "ReverseProxy": {
        "ForwardedHeaders": {
            "Enabled": true,
            "XForwarded": {
                "Prefix": "X-Forwarded-",
                "UseOriginalHost": true,
                "UseOriginalProto": true
            }
        },
        "Routes": {
            "auth_connect": {
                "ClusterId": "authserver",
                "Match": { "Path": "/connect/{**catchall}" },
                "Transforms": [
                    { "RequestHeader": "Host", "Set": "localhost:8080" },
                    { "RequestHeader": "X-Forwarded-Proto", "Set": "http" }
                ]
            },
            "auth_account": {
                "ClusterId": "authserver",
                "Match": { "Path": "/Account/{**catchall}" },
                "Transforms": [
                    { "RequestHeader": "Host", "Set": "localhost:8080" },
                    { "RequestHeader": "X-Forwarded-Proto", "Set": "http" }
                ]
            },
            "auth_wellknown": {
                "ClusterId": "authserver",
                "Match": { "Path": "/.well-known/{**catchall}" },
                "Transforms": [
                    { "RequestHeader": "Host", "Set": "localhost:8080" },
                    { "RequestHeader": "X-Forwarded-Proto", "Set": "http" }
                ]
            },
            "static_css": {
                "ClusterId": "authserver",
                "Match": { "Path": "/css/{**catchall}" },
                "Transforms": [
                    { "RequestHeader": "Host", "Set": "localhost:8080" },
                    { "RequestHeader": "X-Forwarded-Proto", "Set": "http" }
                ]
            },
            "static_lib": {
                "ClusterId": "authserver",
                "Match": { "Path": "Identity/lib/{**catchall}" },
                "Transforms": [
                    { "RequestHeader": "Host", "Set": "localhost:8080" },
                    { "RequestHeader": "X-Forwarded-Proto", "Set": "http" }
                ]
            },
            "static_js": {
                "ClusterId": "authserver",
                "Match": { "Path": "Identity/js/{**catchall}" },
                "Transforms": [
                    { "RequestHeader": "Host", "Set": "localhost:8080" },
                    { "RequestHeader": "X-Forwarded-Proto", "Set": "http" }
                ]
            },
            "auth_identity": {
                "ClusterId": "authserver",
                "Match": { "Path": "/Identity/{**catchall}" },
                "Transforms": [
                    { "RequestHeader": "Host", "Set": "localhost:8080" },
                    { "RequestHeader": "X-Forwarded-Proto", "Set": "http" }
                ]
            },
            "signalr_hub": {
                "ClusterId": "restapi",
                "Match": { "Path": "/hub/{**catchall}" },
                "Transforms": [
                    { "RequestHeaderOriginalHost": true },
                    { "Forwarded": "for,host,proto" }
                ]
            },
            "api": {
                "ClusterId": "restapi",
                "Match": { "Path": "/api/{**catchall}" },
                "Transforms": [
                    { "RequestHeaderOriginalHost": true },
                    { "Forwarded": "for,host,proto" }
                ]
            },
            "mvc": {
                "ClusterId": "mvcclient",
                "Match": { "Path": "{**catchall}" },
                "Transforms": [
                    { "RequestHeaderOriginalHost": true },
                    { "Forwarded": "for,host,proto" }
                ]
            }
        },
        "Clusters": {
            "restapi": {
                "Destinations": {
                    "restapi": { "Address": "http://restapi:8080" }
                }
            },
            "mvcclient": {
                "Destinations": {
                    "mvcclient": { "Address": "http://mvcclient:8080" }
                }
            },
            "authserver": {
                "Destinations": {
                    "authserver": { "Address": "http://authserver:8080" }
                }
            }
        }
    }
}
